# Дипломная работа к профессии Python-разработчик «API Сервис заказа товаров для розничных сетей».

## Описание

Приложение предназначено для автоматизации закупок в розничной сети. Пользователи сервиса — покупатель (менеджер торговой сети, который закупает товары для продажи в магазине) и поставщик товаров.

**Клиент (покупатель):**

- Менеджер закупок через API делает ежедневные закупки по каталогу, в котором
  представлены товары от нескольких поставщиков.
- В одном заказе можно указать товары от разных поставщиков — это
  повлияет на стоимость доставки.
- Пользователь может авторизироваться, регистрироваться и восстанавливать пароль через API.
    
**Поставщик:**

- Через API информирует сервис об обновлении прайса.
- Может включать и отключать прием заказов.
- Может получать список оформленных заказов (с товарами из его прайса).


## Задача: полностью готовый backend

Необходимо разработать backend-часть (Django) сервиса заказа товаров для розничных сетей.

**Базовая часть:**
* Разработка сервиса под готовую спецификацию (API);
* Возможность добавления настраиваемых полей (характеристик) товаров;
* Импорт товаров;
* Отправка накладной на email администратора (для исполнения заказа);
* Отправка заказа на email клиента (подтверждение приема заказа).

**Продвинутая часть:**
* Экспорт товаров;
* Админка заказов (проставление статуса заказа и уведомление клиента);
* Выделение медленных методов в отдельные процессы (email, импорт, экспорт).

Критерии достижения:

1. Полностью работающие API Endpoint
2. Корректно отрабатывает следующий сценарий:
   - пользователь может авторизироваться;
   - есть возможность отправки данных для регистрации и получения email с подтверждением регистрации;
   - пользователь может добавлять в корзину товары от разных магазинов;
   - пользователь может подтверждать заказ с вводом адреса доставки;
   - пользователь получает email с подтверждением после ввода адреса доставки;
   - Пользователь может переходить на страницу "Заказы" и открывать созданный заказ.


## Для запуска проекта необходимо:
___

### Клонировать репозиторий:

```bash
https://github.com/EvgenyMyznikov/python-final-diplom.git
```

### В редакторе открыть папку final_diploma.


### Установить последнюю версию pipenv, создать виртуальную среду:
* Pipenv — это набирающий популярность пакет управления виртуальным окружением для Python.

```bash
pip3 install pipenv
pipenv shell
```
### или для создания и активации виртуального окружения можно использовать virualenv:

```bash
python3 -m venv venv
source venv/bin/activate
```

### Установить зависимости:

```bash
pipenv install -r requirements.txt

pip3 install -r requirements.txt
```

### Вам необходимо будет создать базу данных и настроить ее:

* [настройки баз данных](https://docs.djangoproject.com/en/3.2/ref/settings/#std:setting-DATABASES)

Django предоставляет две команды для работы с миграциями и структурой базы данных:

* migrate, которая отвечает за применение и неприменение миграций.
* makemigrations, которая отвечает за создание новых миграций на основе изменений в моделях.

### Применить миграции:

```bash
python3 manage.py migrate
```

### Запустить сервер для разработки Django:

```bash
python3 manage.py runserver
```

### [Celery](https://docs.celeryproject.org/en/stable/#) – это асинхронная очередь событий, которая может решать множество различных задач.
Для работы c Celery из приложения необходим посредник. Часто его называют брокер. Этот посредник получает сообщения от внешних приложений и отправляет их рабочим потокам Celery, которые уже непосредственно выполняют нужные действия.

### [RabbitMQ](https://www.rabbitmq.com/download.html) — программный брокер сообщений на основе стандарта AMQP — тиражируемое связующее программное обеспечение, ориентированное на обработку сообщений.
Вам нужно загрузить, установить и запустить RabbitMQ.


### Запустите процесс Celery во втором терминале:

```bash
celery -A orders worker -l info
```

### Иногда разработчику необходимо отслеживать выполнение задач. Для этих целей отлично подходит инструмент Flower.
Для запуска Flower выполните команду:

```bash
celery -A orders flower
```
Откройте в браузере[](http://localhost:5555/dashboard). Вы увидите активные рабочие процессы Celery и статистику по ним.


### Документация API доступна по ссылке на домашней странице.
